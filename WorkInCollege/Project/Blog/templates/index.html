{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Blog</title>
    </head>

    <body>
        <form method="post" class="makePost">
            {% csrf_token %}
            <input class="inputLogin" type="text" placeholder="Login"/>
            <input class="inputPassword" type="text" placeholder="Password"/>
            
        </form>


        <script>

           const uploadToServer = async(content) =>{ 
                const request = await fetch('http://127.0.0.1:8000/blog/',{
                    method: 'POST',
                    header: {
                        'Content-Type': 'application/json;charset=utf-8'
                    },
                    body: JSON.stringify(content),
                })
                
            }

            const form = document.querySelector('.makePost').addEventListener('keypress', (event) => {
                if(event.key === 'Enter'){

                    const login = document.querySelector('.inputLogin').value;
                    const password = document.querySelector('.inputPassword').value;

                    if(login && password){
                        uploadToServer({'login': login, 'password': password});
                    }
                }
                
            });
            
        </script>


    </body>
</html>